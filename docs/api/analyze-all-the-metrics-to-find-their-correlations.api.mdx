---
id: analyze-all-the-metrics-to-find-their-correlations
title: "Analyze all the metrics to find their correlations"
description: "THIS ENDPOINT IS OBSOLETE. Use the /weights endpoint. Given two time-windows (baseline, highlight), it goes through all the available metrics, querying both windows and tries to find how these two windows relate to each other. It supports multiple algorithms to do so. The result is a list of all metrics evaluated, weighted for 0.0 (the two windows are more different) to 1.0 (the two windows are similar). The algorithm adjusts automatically the baseline window to be a power of two multiple of the highlighted (1, 2, 4, 8, etc)."
sidebar_label: "Analyze all the metrics to find their correlations"
hide_title: true
hide_table_of_contents: true
api: {"description":"THIS ENDPOINT IS OBSOLETE. Use the /weights endpoint. Given two time-windows (baseline, highlight), it goes through all the available metrics, querying both windows and tries to find how these two windows relate to each other. It supports multiple algorithms to do so. The result is a list of all metrics evaluated, weighted for 0.0 (the two windows are more different) to 1.0 (the two windows are similar). The algorithm adjusts automatically the baseline window to be a power of two multiple of the highlighted (1, 2, 4, 8, etc).","parameters":[{"name":"baseline_after","in":"query","description":"This parameter can either be an absolute timestamp specifying the starting point of baseline window, or a relative number of seconds (negative, relative to parameter baseline_before). Netdata will assume it is a relative number if it is less that 3 years (in seconds).","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":-300}},{"name":"baseline_before","in":"query","description":"This parameter can either be an absolute timestamp specifying the ending point of the baseline window, or a relative number of seconds (negative), relative to the last collected timestamp. Netdata will assume it is a relative number if it is less than 3 years (in seconds).","required":false,"schema":{"type":"number","format":"integer","default":-60}},{"name":"after","in":"query","description":"This parameter can either be an absolute timestamp specifying the starting point of highlighted window, or a relative number of seconds (negative, relative to parameter highlight_before). Netdata will assume it is a relative number if it is less that 3 years (in seconds).","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":-60}},{"name":"before","in":"query","description":"This parameter can either be an absolute timestamp specifying the ending point of the highlighted window, or a relative number of seconds (negative), relative to the last collected timestamp. Netdata will assume it is a relative number if it is less than 3 years (in seconds).","required":false,"schema":{"type":"number","format":"integer","default":0}},{"name":"points","in":"query","description":"The number of points to be evaluated for the highlighted window. The baseline window will be adjusted automatically to receive a proportional amount of points.","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":500}},{"name":"method","in":"query","description":"the algorithm to run","required":false,"schema":{"type":"string","enum":["ks2","volume"],"default":"ks2"}},{"name":"timeout","in":"query","description":"Cancel the query if to takes more that this amount of milliseconds.","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":60000}},{"name":"options","in":"query","description":"Options that affect data generation.","required":false,"allowEmptyValue":false,"schema":{"type":"array","items":{"type":"string","enum":["min2max","abs","absolute","absolute-sum","null2zero","percentage","unaligned","allow_past","nonzero","anomaly-bit","raw"]},"default":["null2zero","allow_past","nonzero","unaligned"]}},{"name":"group","in":"query","description":"The grouping method. If multiple collected values are to be grouped in order to return fewer points, this parameters defines the method of grouping. methods supported \"min\", \"max\", \"average\", \"sum\", \"incremental-sum\". \"max\" is actually calculated on the absolute value collected (so it works for both positive and negative dimensions to return the most extreme value in either direction).","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["min","max","average","median","stddev","sum","incremental-sum","ses","des","cv","countif","percentile","percentile25","percentile50","percentile75","percentile80","percentile90","percentile95","percentile97","percentile98","percentile99","trimmed-mean","trimmed-mean1","trimmed-mean2","trimmed-mean3","trimmed-mean5","trimmed-mean10","trimmed-mean15","trimmed-mean20","trimmed-mean25","trimmed-median","trimmed-median1","trimmed-median2","trimmed-median3","trimmed-median5","trimmed-median10","trimmed-median15","trimmed-median20","trimmed-median25"],"default":"average"}},{"name":"group_options","in":"query","description":"When the group function supports additional parameters, this field can be used to pass them to it. Currently only \"countif\" supports this.","required":false,"allowEmptyValue":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"JSON object with weights for each chart and dimension.","content":{"application/json":{"schema":{"type":"object","properties":{"after":{"description":"the start time of the highlighted window","type":"integer"},"before":{"description":"the end time of the highlighted window","type":"integer"},"duration":{"description":"the duration of the highlighted window","type":"integer"},"points":{"description":"the points of the highlighted window","type":"integer"},"baseline_after":{"description":"the start time of the baseline window","type":"integer"},"baseline_before":{"description":"the end time of the baseline window","type":"integer"},"baseline_duration":{"description":"the duration of the baseline window","type":"integer"},"baseline_points":{"description":"the points of the baseline window","type":"integer"},"group":{"description":"the grouping method across time","type":"string"},"method":{"description":"the correlation method used","type":"string"},"options":{"description":"a comma separated list of the query options set","type":"string"},"correlated_dimensions":{"description":"the number of dimensions returned in the result"},"total_dimensions_count":{"description":"the total number of dimensions evaluated","type":"integer"},"statistics":{"type":"object","properties":{"query_time_ms":{"type":"number"},"db_queries":{"type":"integer"},"db_points_read":{"type":"integer"},"query_result_points":{"type":"integer"},"binary_searches":{"type":"integer"}}},"correlated_charts":{"type":"object","description":"An object containing chart objects with their metrics correlations.","properties":{"chart-id1":{"type":"object","properties":{"context":{"type":"string"},"dimensions":{"type":"object","properties":{"dimension1-name":{"type":"number"},"dimension2-name":{"type":"number"}}}}},"chart-id2":{"type":"object","properties":{"context":{"type":"string"},"dimensions":{"type":"object","properties":{"dimension1-name":{"type":"number"},"dimension2-name":{"type":"number"}}}}}}}},"title":"metric_correlations"}}}},"400":{"description":"The given parameters are invalid."},"403":{"description":"metrics correlations are not enabled on this Netdata Agent."},"404":{"description":"No charts could be found, or the method that correlated the metrics did not produce any result."},"504":{"description":"Timeout - the query took too long and has been cancelled."}},"method":"get","path":"/api/v1/metric_correlations","servers":[{"url":"https://registry.my-netdata.io"},{"url":"http://registry.my-netdata.io"},{"url":"http://localhost:19999"}],"info":{"title":"Netdata API","description":"Real-time performance and health monitoring.","version":"1.38"},"postman":{"name":"Analyze all the metrics to find their correlations","description":{"content":"THIS ENDPOINT IS OBSOLETE. Use the /weights endpoint. Given two time-windows (baseline, highlight), it goes through all the available metrics, querying both windows and tries to find how these two windows relate to each other. It supports multiple algorithms to do so. The result is a list of all metrics evaluated, weighted for 0.0 (the two windows are more different) to 1.0 (the two windows are similar). The algorithm adjusts automatically the baseline window to be a power of two multiple of the highlighted (1, 2, 4, 8, etc).","type":"text/plain"},"url":{"path":["api","v1","metric_correlations"],"host":["{{baseUrl}}"],"query":[{"disabled":false,"description":{"content":"This parameter can either be an absolute timestamp specifying the starting point of baseline window, or a relative number of seconds (negative, relative to parameter baseline_before). Netdata will assume it is a relative number if it is less that 3 years (in seconds).","type":"text/plain"},"key":"baseline_after","value":""},{"disabled":false,"description":{"content":"This parameter can either be an absolute timestamp specifying the ending point of the baseline window, or a relative number of seconds (negative), relative to the last collected timestamp. Netdata will assume it is a relative number if it is less than 3 years (in seconds).","type":"text/plain"},"key":"baseline_before","value":""},{"disabled":false,"description":{"content":"This parameter can either be an absolute timestamp specifying the starting point of highlighted window, or a relative number of seconds (negative, relative to parameter highlight_before). Netdata will assume it is a relative number if it is less that 3 years (in seconds).","type":"text/plain"},"key":"after","value":""},{"disabled":false,"description":{"content":"This parameter can either be an absolute timestamp specifying the ending point of the highlighted window, or a relative number of seconds (negative), relative to the last collected timestamp. Netdata will assume it is a relative number if it is less than 3 years (in seconds).","type":"text/plain"},"key":"before","value":""},{"disabled":false,"description":{"content":"The number of points to be evaluated for the highlighted window. The baseline window will be adjusted automatically to receive a proportional amount of points.","type":"text/plain"},"key":"points","value":""},{"disabled":false,"description":{"content":"the algorithm to run","type":"text/plain"},"key":"method","value":""},{"disabled":false,"description":{"content":"Cancel the query if to takes more that this amount of milliseconds.","type":"text/plain"},"key":"timeout","value":""},{"disabled":false,"description":{"content":"Options that affect data generation.","type":"text/plain"},"key":"options","value":""},{"disabled":false,"description":{"content":"(Required) The grouping method. If multiple collected values are to be grouped in order to return fewer points, this parameters defines the method of grouping. methods supported \"min\", \"max\", \"average\", \"sum\", \"incremental-sum\". \"max\" is actually calculated on the absolute value collected (so it works for both positive and negative dimensions to return the most extreme value in either direction).","type":"text/plain"},"key":"group","value":""},{"disabled":false,"description":{"content":"When the group function supports additional parameters, this field can be used to pass them to it. Currently only \"countif\" supports this.","type":"text/plain"},"key":"group_options","value":""}],"variable":[]},"header":[{"key":"Accept","value":"application/json"}],"method":"GET"}}
sidebar_class_name: "get api-method"
info_path: docs/api/netdata-api
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import MethodEndpoint from "@theme/ApiDemoPanel/MethodEndpoint";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import TabItem from "@theme/TabItem";

<h1 className={"openapi__heading"}>Analyze all the metrics to find their correlations</h1>

<MethodEndpoint method={"get"} path={"/api/v1/metric_correlations"}></MethodEndpoint>



THIS ENDPOINT IS OBSOLETE. Use the /weights endpoint. Given two time-windows (baseline, highlight), it goes through all the available metrics, querying both windows and tries to find how these two windows relate to each other. It supports multiple algorithms to do so. The result is a list of all metrics evaluated, weighted for 0.0 (the two windows are more different) to 1.0 (the two windows are similar). The algorithm adjusts automatically the baseline window to be a power of two multiple of the highlighted (1, 2, 4, 8, etc).

<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><strong>Query Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"baseline_after","in":"query","description":"This parameter can either be an absolute timestamp specifying the starting point of baseline window, or a relative number of seconds (negative, relative to parameter baseline_before). Netdata will assume it is a relative number if it is less that 3 years (in seconds).","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":-300}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"baseline_before","in":"query","description":"This parameter can either be an absolute timestamp specifying the ending point of the baseline window, or a relative number of seconds (negative), relative to the last collected timestamp. Netdata will assume it is a relative number if it is less than 3 years (in seconds).","required":false,"schema":{"type":"number","format":"integer","default":-60}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"after","in":"query","description":"This parameter can either be an absolute timestamp specifying the starting point of highlighted window, or a relative number of seconds (negative, relative to parameter highlight_before). Netdata will assume it is a relative number if it is less that 3 years (in seconds).","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":-60}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"before","in":"query","description":"This parameter can either be an absolute timestamp specifying the ending point of the highlighted window, or a relative number of seconds (negative), relative to the last collected timestamp. Netdata will assume it is a relative number if it is less than 3 years (in seconds).","required":false,"schema":{"type":"number","format":"integer","default":0}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"points","in":"query","description":"The number of points to be evaluated for the highlighted window. The baseline window will be adjusted automatically to receive a proportional amount of points.","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":500}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"method","in":"query","description":"the algorithm to run","required":false,"schema":{"type":"string","enum":["ks2","volume"],"default":"ks2"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"timeout","in":"query","description":"Cancel the query if to takes more that this amount of milliseconds.","required":false,"allowEmptyValue":false,"schema":{"type":"number","format":"integer","default":60000}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"options","in":"query","description":"Options that affect data generation.","required":false,"allowEmptyValue":false,"schema":{"type":"array","items":{"type":"string","enum":["min2max","abs","absolute","absolute-sum","null2zero","percentage","unaligned","allow_past","nonzero","anomaly-bit","raw"]},"default":["null2zero","allow_past","nonzero","unaligned"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"group","in":"query","description":"The grouping method. If multiple collected values are to be grouped in order to return fewer points, this parameters defines the method of grouping. methods supported \"min\", \"max\", \"average\", \"sum\", \"incremental-sum\". \"max\" is actually calculated on the absolute value collected (so it works for both positive and negative dimensions to return the most extreme value in either direction).","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["min","max","average","median","stddev","sum","incremental-sum","ses","des","cv","countif","percentile","percentile25","percentile50","percentile75","percentile80","percentile90","percentile95","percentile97","percentile98","percentile99","trimmed-mean","trimmed-mean1","trimmed-mean2","trimmed-mean3","trimmed-mean5","trimmed-mean10","trimmed-mean15","trimmed-mean20","trimmed-mean25","trimmed-median","trimmed-median1","trimmed-median2","trimmed-median3","trimmed-median5","trimmed-median10","trimmed-median15","trimmed-median20","trimmed-median25"],"default":"average"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"group_options","in":"query","description":"When the group function supports additional parameters, this field can be used to pass them to it. Currently only \"countif\" supports this.","required":false,"allowEmptyValue":false,"schema":{"type":"string"}}}></ParamsItem></ul></div></details><div><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

JSON object with weights for each chart and dimension.

</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"after"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the start time of the highlighted window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"before"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the end time of the highlighted window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"duration"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the duration of the highlighted window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"points"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the points of the highlighted window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"baseline_after"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the start time of the baseline window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"baseline_before"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the end time of the baseline window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"baseline_duration"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the duration of the baseline window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"baseline_points"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the points of the baseline window","type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"group"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"the grouping method across time","type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"method"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"the correlation method used","type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"options"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"a comma separated list of the query options set","type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"correlated_dimensions"} required={false} schemaName={""} qualifierMessage={undefined} schema={{"description":"the number of dimensions returned in the result"}}></SchemaItem><SchemaItem collapsible={false} name={"total_dimensions_count"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"description":"the total number of dimensions evaluated","type":"integer"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><strong>statistics</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"query_time_ms"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number"}}></SchemaItem><SchemaItem collapsible={false} name={"db_queries"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"db_points_read"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"query_result_points"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem><SchemaItem collapsible={false} name={"binary_searches"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><strong>correlated_charts</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

An object containing chart objects with their metrics correlations.

</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><strong>chart-id1</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"context"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><strong>dimensions</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"dimension1-name"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number"}}></SchemaItem><SchemaItem collapsible={false} name={"dimension2-name"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number"}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><strong>chart-id2</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"context"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><strong>dimensions</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"dimension1-name"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number"}}></SchemaItem><SchemaItem collapsible={false} name={"dimension2-name"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number"}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"after\": 0,\n  \"before\": 0,\n  \"duration\": 0,\n  \"points\": 0,\n  \"baseline_after\": 0,\n  \"baseline_before\": 0,\n  \"baseline_duration\": 0,\n  \"baseline_points\": 0,\n  \"group\": \"string\",\n  \"method\": \"string\",\n  \"options\": \"string\",\n  \"total_dimensions_count\": 0,\n  \"statistics\": {\n    \"query_time_ms\": 0,\n    \"db_queries\": 0,\n    \"db_points_read\": 0,\n    \"query_result_points\": 0,\n    \"binary_searches\": 0\n  },\n  \"correlated_charts\": {\n    \"chart-id1\": {\n      \"context\": \"string\",\n      \"dimensions\": {\n        \"dimension1-name\": 0,\n        \"dimension2-name\": 0\n      }\n    },\n    \"chart-id2\": {\n      \"context\": \"string\",\n      \"dimensions\": {\n        \"dimension1-name\": 0,\n        \"dimension2-name\": 0\n      }\n    }\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"400"} value={"400"}><div>

The given parameters are invalid.

</div><div></div></TabItem><TabItem label={"403"} value={"403"}><div>

metrics correlations are not enabled on this Netdata Agent.

</div><div></div></TabItem><TabItem label={"404"} value={"404"}><div>

No charts could be found, or the method that correlated the metrics did not produce any result.

</div><div></div></TabItem><TabItem label={"504"} value={"504"}><div>

Timeout - the query took too long and has been cancelled.

</div><div></div></TabItem></ApiTabs></div></div>
      